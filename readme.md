# CI Test Runner Environment

Этот репозиторий предназначен для поддержания и запуска **персистентной (stateful) среды для сборки и тестирования** нашего основного проекта.

## Проблема

Стандартные воркеры GitHub Actions являются **эфемерными (ephemeral)** и **stateless**. Это означает, что после каждого запуска все установленные зависимости, скачанные данные и настройки теряются. Для большинства CI/CD задач это нормально, но наш проект требует более сложного подхода:

1.  **Сложные зависимости:** Установка полного набора наших инструментов для сборки может занимать 20-30 минут, что делает каждый запуск очень долгим.
2.  **Интеграционное тестирование:** Некоторые наши тесты требуют наличия запущенной базы данных и нескольких сервисов, состояние которых должно сохраняться между запусками.
3.  **Интерактивная отладка:** Иногда билд падает с неочевидной ошибкой, и для ее решения требуется **интерактивный доступ** к окружению (через SSH) для анализа логов и состояния системы в реальном времени, что невозможно на стандартных ранерах.

## Решение

Этот воркфлоу решает вышеописанные проблемы следующим образом:

-   **Длительные сессии:** Воркер запускается на длительный период (~6 часов), создавая стабильную среду для работы.
-   **SSH доступ:** Для интерактивной отладки используется `cloudflared` туннель, который предоставляет прямой и безопасный SSH-доступ к окружению.
-   **Сохранение состояния (Stateful):** Перед завершением работы воркер автоматически создает бэкап всей рабочей директории, включая установленные пакеты и данные.
-   **Автоматический перезапуск:** Для обеспечения высокой доступности тестовой среды (`high availability`), воркфлоу автоматически перезапускает себя, восстанавливая состояние из последнего бэкапа.

## Текущий статус

Среда находится в активном использовании. Воркфлоу настроен на автоматический перезапуск для непрерывного тестирования.

**Note:** This setup is crucial for our development pipeline. Please do not interpret the long-running jobs as a misuse of the Actions platform.
